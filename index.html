<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Music Tunnel Cost Calculator</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .manual-button {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1000;
      padding: 8px 12px;
      border-radius: 20px;
      background: #6c5ce7;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 14px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .manual-button:hover {
      background: #5b4bc4;
    }
  </style>
</head>
<body>
  <button class="manual-button" onclick="window.open('user-manual.html', '_blank')">
    <ion-icon name="book-outline"></ion-icon>
    Manual
  </button>
  <div id="userModal" class="modal">
    <div class="box">
      <div class="auth-tabs">
        <div class="tab active" id="loginTab" onclick="switchTab('login')">Login</div>
        <div class="tab" id="registerTab" onclick="switchTab('register')">Register</div>
      </div>

      <!-- Login Form -->
      <div id="loginForm" class="auth-form">
        <label for="loginEmail">Email:</label>
        <input type="email" id="loginEmail" class="modal-input" placeholder="your@email.com" />

        <label for="loginPassword">Password:</label>
        <input type="password" id="loginPassword" class="modal-input" />

        <p style="text-align: right; margin: 5px 0;">
          <a href="#" onclick="showForgotPasswordForm()">Forgot password?</a>
        </p>

        <button onclick="handleLogin()" class="full-width-button">Login</button>
      </div>

      <!-- Guest quick access -->
      <div class="guest-divider">
        <div class="divider-line"></div>
        <div class="divider-text">or</div>
        <div class="divider-line"></div>
      </div>

      <div id="guestForm" class="guest-form">
        <label for="guestName">Continue as guest:</label>
        <input type="text" id="guestName" class="modal-input" placeholder="Enter your name" />

        <label class="guest-gender-title">Gender:</label>
        <div class="gender-selection guest-gender">
          <label class="gender-option">
            <input type="radio" name="guestGender" value="Male" />
            <span>â™‚ Male</span>
          </label>
          <label class="gender-option">
            <input type="radio" name="guestGender" value="Female" />
            <span>â™€ Female</span>
          </label>
        </div>

        <button onclick="handleGuestLogin()" class="outline-button">Continue as guest</button>
        <p class="info-text">Weâ€™ll create a temporary guest account so you can start or join sessions without email.</p>
      </div>

      <!-- Register Form -->
      <div id="registerForm" class="auth-form" style="display: none;">
        <label for="registerEmail">Email:</label>
        <input type="email" id="registerEmail" class="modal-input" placeholder="your@email.com" />

        <label for="registerPassword">Password:</label>
        <input type="password" id="registerPassword" class="modal-input" placeholder="Min. 6 characters" />

        <label for="registerName">Name:</label>
        <input type="text" id="registerName" class="modal-input" />

        <label>Gender:</label>
        <div class="gender-selection">
          <label class="gender-option">
            <input type="radio" name="registerGender" value="Male" />
            <span>Male</span>
          </label>
          <label class="gender-option">
            <input type="radio" name="registerGender" value="Female" />
            <span>Female</span>
          </label>
        </div>

        <label for="securityQuestion">Security Question:</label>
        <select id="securityQuestion" class="modal-input">
          <option value="">Select a security question</option>
          <option value="pet">What was your first pet's name?</option>
          <option value="street">What street did you grow up on?</option>
          <option value="mother">What is your mother's maiden name?</option>
          <option value="school">What elementary school did you attend?</option>
          <option value="birth">In what city were you born?</option>
        </select>

        <label for="securityAnswer">Your Answer:</label>
        <input type="text" id="securityAnswer" class="modal-input" />
        <div class="info-text">Remember this answer! You'll need it to recover your account if you forget your password.</div>

        <button onclick="handleRegister()" class="full-width-button">Register</button>
      </div>
    </div>
  </div>
<div id="startSessionModal" class="modal">
    <div class="box">
      <h2>Start New Session</h2>
      <label for="modalLocationSelect">Location:</label>
      <select id="modalLocationSelect" class="modal-input"></select>
      <label for="modalRoomNumber">Room Number:</label>
      <input type="text" id="modalRoomNumber" class="modal-input" placeholder="Enter room number"/>
      <div class="button-container" style="margin-top: 15px;">
        <button onclick="document.getElementById('startSessionModal').style.display = 'none'" class="leave-button">Cancel</button>
        <button onclick="confirmStartSession()" class="start-button">Start Session</button>
      </div>
    </div>
  </div>
  
  <div id="sessionInfoBlock" class="session-info-block">
    <h2 class="session-info-heading">ðŸŽµ Session Info</h2>
    <p><strong><i class="fas fa-map-marker-alt"></i> Location:</strong> <span id="infoLocation"></span></p>
    <p><strong><i class="fas fa-door-open"></i> Room:</strong> <span id="infoRoom"></span></p>
    <p><strong><i class="fas fa-user"></i> Started by:</strong> <span id="infoStarter"></span></p>
    <p><strong><i class="fas fa-hashtag"></i> Session #:</strong> <span id="infoSessionId"></span></p>
    <p><strong><i class="fas fa-clock"></i> Session Start Time:</strong> <span id="infoStartTime"></span></p>
    <p><strong><i class="fas fa-sign-in-alt"></i> Your Join Time:</strong> <span id="infoJoinTime"></span></p>
    <p><strong><i class="fas fa-users"></i> Participants Joined:</strong> <span id="infoParticipants"></span></p>
    <div class="button-container">
      <button onclick="leaveSession()" class="leave-button">Leave Session</button>
      <button id="endSessionBtn" onclick="endSession()" class="end-button">End Session</button>
    </div>
  </div>
  
  <div class="container">
    <h2 class="main-heading">ðŸŽµ Start or Join a Session</h2>
  
    <div class="location-container">
      <label for="locationDropdown" class="location-label">Choose Location</label>
      <select id="locationDropdown" class="location-select" onchange="loadActiveSessions()"></select>
    </div>
  
    <div class="active-sessions-container">
      <div class="sticky-header">
        <h3 class="section-heading">Active Sessions</h3>
      </div>
      <div id="activeSessionsList" class="active-sessions-list">Loading...</div>
    </div>
  </div>
  
  <div id="bottomPanel" class="bottom-panel">
    <div class="panel-header" id="panelHeader">Panel</div>
    <div id="panelContent">Content goes here...</div>
  </div>

  <div id="startSessionBtn" class="fixed-action-button" onclick="startNewSession()">
    <i class="fas fa-play-circle"></i> Start New Session
  </div>
  
  <div class="navigation">
    <ul>
      <li class="list active" onclick="togglePanel('participants')">
        <a href="javascript:void(0);">
          <span class="icon"><ion-icon name="people-outline"></ion-icon></span>
          <span class="text">Participants</span>
        </a>
      </li>
      <li class="list" onclick="togglePanel('calculator')">
        <a href="javascript:void(0);">
          <span class="icon"><ion-icon name="calculator-outline"></ion-icon></span>
          <span class="text">Calculator</span>
        </a>
      </li>
      <li class="list" onclick="togglePanel('history')">
        <a href="javascript:void(0);">
          <span class="icon"><ion-icon name="calendar-outline"></ion-icon></span>
          <span class="text">History</span>
        </a>
      </li>
      <li class="list" onclick="togglePanel('profile')">
        <a href="javascript:void(0);">
          <span class="icon"><ion-icon name="person-outline"></ion-icon></span>
          <span class="text">Profile</span>
        </a>
      </li>
      <div class="indicator" id="indicator"></div>
    </ul>
  </div>

  <script src="js/script.js"></script>
</body>
</html>
